<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hami MiniMarket - Final Project</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .logo-text {
            font-weight: 700;
            font-size: 1.8rem;
            color: var(--primary-green);
            text-decoration: none;
        }
    </style>
</head>
<body>
    
    <!-- Header (UPDATED for Auth) -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <img src="assets/hami-logo.jpg" 
                     alt="Hami MiniMarket Logo" 
                     class="logo-img"
                     onerror="this.outerHTML='<a href=\'#\' class=\'logo-text\'>Hami MiniMarket</a>'; this.onerror=null;">
            </div>
            <nav class="nav">
                <ul class="nav-list">
                    <li><a href="#home" class="nav-link">Home</a></li>
                    <li><a href="#products" class="nav-link">Products</a></li>
                    <li><a href="#about" class="nav-link">About</a></li>
                    <li><a href="#contact" class="nav-link">Contact</a></li>
                    
                    <!-- (NEW) Auth & Cart Section -->
                    <li class="nav-auth">
                        <!-- Shows when logged out -->
                        <div id="nav-auth-links">
                            <a href="#account" class="nav-link" id="nav-login-link">Login</a>
                        </div>
                        <!-- Shows when logged in -->
                        <div id="nav-user-info" class="hidden">
                            <a href="#account" class="nav-link" id="nav-account-link">
                                <i class="fas fa-user"></i> <span id="nav-username">User</span>
                            </a>
                            <button id="logout-btn" title="Logout"><i class="fas fa-sign-out-alt"></i></button>
                        </div>
                        <!-- Cart Icon (Moved) -->
                        <div class="cart-icon-wrapper" id="cart-icon" title="View Cart">
                            <i class="fas fa-shopping-cart"></i>
                            <span id="cart-count">0</span>
                        </div>
                    </li>
                </ul>
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </nav>
        </div>
    </header>

    <!-- This div will contain the main shop content -->
    <div id="shop-page" class="page">
        <!-- Hero Section -->
        <section id="home" class="hero">
            <div class="hero-background">
                <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2074&q=80" alt="Fresh fruits and vegetables at Hami MiniMarket" class="hero-bg-image">
                <div class="hero-overlay"></div>
            </div>
            <div class="hero-content">
                <h2 class="hero-title">Fresh. Local. Trusted.</h2>
                <p class="hero-subtitle">Discover the finest selection of fresh fruits and vegetables from local farmers</p>
                <button class="cta-button">Shop Now</button>
            </div>
        </section>

        <!-- Products Section -->
        <section id="products" class="products">
            <div class="container">
                <h2 class="section-title">Our Fresh Products</h2>
                
                <div class="product-filters">
                    <div class="filter-group">
                        <label for="search-input">Search by Name</label>
                        <div class="search-bar">
                            <i class="fas fa-search"></i>
                            <input type="search" id="search-input" placeholder="e.g., Apples, Carrots...">
                        </div>
                    </div>
                    <div class="filter-group">
                        <label>Filter by Category</label>
                        <div class="category-filters" id="category-filters">
                            <button class="category-btn active" data-category="all">All</button>
                            <button class="category-btn" data-category="fruit">Fruits</button>
                            <button class="category-btn" data-category="vegetable">Vegetables</button>
                        </div>
                    </div>
                    <div class="filter-group">
                         <label for="price-slider">Filter by Price</label>
                        <div class="price-display">
                            <span>Up to:</span>
                            <span id="price-value">$10.00</span>
                        </div>
                        <input type="range" id="price-slider" min="1" max="10" value="10" step="0.50">
                    </div>
                </div>

                <div class="products-grid" id="products-grid">
                    <!-- Product cards will be injected here by JavaScript -->
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="about">
            <div class="container">
                <div class="about-content">
                    <div class="about-text">
                        <h2 class="section-title" style="text-align: left;">About Hami MiniMarket</h2>
                        <p>At Hami MiniMarket, we believe in bringing you the freshest, highest-quality fruits and vegetables from local farmers. Our mission is to support our community while providing you with nutritious, delicious produce that your family deserves.</p>
                        <p>We carefully select each item to ensure it meets our high standards for freshness and quality. From crisp apples to vibrant vegetables, every product in our store is chosen with care and delivered with pride.</p>
                        <div class="features">
                            <div class="feature">
                                <i class="fas fa-truck"></i>
                                <h4>Fresh Delivery</h4>
                                <p>Daily deliveries from local farms</p>
                            </div>
                            <div class="feature">
                                <i class="fas fa-leaf"></i>
                                <h4>Organic Options</h4>
                                <p>Wide selection of organic produce</p>
                            </div>
                            <div class="feature">
                                <i class="fas fa-heart"></i>
                                <h4>Community Focus</h4>
                                <p>Supporting local farmers and families</p>
                            </div>
                        </div>
                    </div>
                    <div class="about-image">
                         <img src="assets/our-store.png" alt="Store Interior" onerror="this.src='https://placehold.co/400x450/F5F5DC/2C3E50?text=Our+Store'; this.onerror=null;">
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="contact">
            <div class="container">
                <h2 class="section-title">Get In Touch</h2>
                <div class="contact-content">
                    <div class="contact-info">
                        <h3>Visit Our Store</h3>
                        <div class="info-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <p>123 Main Street, Hami City</p>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-phone"></i>
                            <p>(555) 123-4567</p>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-envelope"></i>
                            <p>info@hamimarket.com</p>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-clock"></i>
                            <p>Mon-Sat: 8AM-8PM<br>Sun: 9AM-6PM</p>
                        </div>
                    </div>
                    <form class="contact-form" id="contactForm">
                        <div class="form-group">
                            <label for="name">Name</label>
                            <input type="text" id="name" name="name" required>
                            <span class="error-message" id="nameError"></span>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" required>
                            <span class="error-message" id="emailError"></span>
                        </div>
                        <div class="form-group">
                            <label for="message">Message</label>
                            <textarea id="message" name="message" rows="5" required></textarea>
                            <span class="error-message" id="messageError"></span>
                        </div>
                        <button type="submit" class="submit-button">Send Message</button>
                    </form>
                </div>
            </div>
        </section>
    </div> <!-- End of #shop-page -->

    <!-- Order Summary Page (UPDATED) -->
    <section id="summary-page" class="page hidden">
        <div class="container">
            <div class="summary-container">
                <div class="summary-header">
                    <h2>Order Summary</h2>
                    <!-- (NEW) Show user greeting -->
                    <p id="summary-user-greeting">Please review your items before confirming.</p>
                </div>
                <div class="summary-body">
                    <h3>Your Items</h3>
                    <div id="summary-list">
                        <!-- Summary items will be injected here -->
                    </div>
                    
                    <h3>Order Totals</h3>
                    <div id="summary-totals">
                        <!-- Summary totals (subtotal, tax, etc.) will be injected here -->
                    </div>
                    
                    <div class="summary-actions">
                        <button class="submit-button" id="confirm-order-btn">
                            <i class="fas fa-check-circle"></i> Confirm Order
                        </button>
                        <button class="submit-button back-to-shop-btn" id="back-to-shop-btn">
                            <i class="fas fa-arrow-left"></i> Back to Shop
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- (NEW) Account Page (for Auth & Order History) -->
    <section id="account-page" class="page hidden">
        <div class="container">
            <!-- This container shows if LOGGED OUT -->
            <div id="auth-forms-container" class="auth-container">
                <div class="auth-tabs">
                    <div class="auth-tab active" id="auth-tab-login">Login</div>
                    <div class="auth-tab" id="auth-tab-signup">Sign Up</div>
                </div>
                
                <!-- Login Form -->
                <form class="auth-form" id="login-form">
                    <h3>Welcome Back!</h3>
                    <div class="form-group">
                        <label for="login-email">Email</label>
                        <input type="email" id="login-email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" name="password" required>
                    </div>
                    <button type="submit" class="submit-button">Login</button>
                </form>
                
                <!-- Signup Form -->
                <form class="auth-form hidden" id="signup-form">
                    <h3>Create Account</h3>
                    <div class="form-group">
                        <label for="signup-name">Full Name</label>
                        <input type="text" id="signup-name" name="name" required minlength="2">
                    </div>
                    <div class="form-group">
                        <label for="signup-email">Email</label>
                        <input type="email" id="signup-email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="signup-password">Password</label>
                        <input type="password" id="signup-password" name="password" required minlength="6">
                    </div>
                    <button type="submit" class="submit-button">Sign Up</button>
                </form>
            </div>
            
            <!-- This container shows if LOGGED IN -->
            <div id="account-info-container" class="account-info-wrapper hidden">
                <div class="account-header">
                    <h2>My Account</h2>
                    <button class="logout-btn-desktop" id="account-logout-btn">Logout</button>
                </div>
                <div class="account-info-content">
                    <p>Welcome, <strong id="account-username">User</strong>!</p>
                    <p style="color: var(--text-light);" id="account-email">user@example.com</p>
                    <br>
                    <div class="order-history-list">
                        <h3>Your Order History</h3>
                        <div id="no-orders-message" class="hidden">
                            <p>You haven't placed any orders yet.</p>
                        </div>
                        <div id="order-history-list">
                            <!-- Order history will be injected here -->
                        </div>
                    </div>
                    <button class="submit-button back-to-shop-btn logout-btn-mobile" id="account-logout-btn-mobile">Logout</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Hami MiniMarket</h3>
                    <p>Your trusted source for fresh, local produce.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#products">Products</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#contact">Contact</a></li>
                        <li><a href="#account" id="footer-account-link">My Account</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Follow Us</h4>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Hami MiniMarket. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </button>
    
    <!-- Cart Sidebar -->
    <div class="cart-overlay" id="cart-overlay"></div>
    <aside class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h2>Your Cart</h2>
            <i class="fas fa-times close-cart-btn" id="close-cart-btn"></i>
        </div>
        <div class="cart-items" id="cart-items-container">
            <!-- Cart items will be injected here -->
            <!-- Empty Cart Message -->
            <div class="empty-cart-message" id="empty-cart-message">
                <i class="fas fa-shopping-basket"></i>
                <p>Your cart is empty.</p>
            </div>
        </div>
        <div class="cart-footer" id="cart-footer">
            <div class="cart-summary-row">
                <span>Subtotal</span>
                <span id="cart-subtotal">$0.00</span>
            </div>
            <div class="cart-summary-row discount" id="cart-discount-row" style="display: none;">
                <span>Discount (10%)</span>
                <span id="cart-discount">$0.00</span>
            </div>
            <div class="cart-summary-row">
                <span>Tax (5%)</span>
                <span id="cart-tax">$0.00</span>
            </div>
            <div class="cart-summary-row total">
                <span>Total</span>
                <span id="cart-total">$0.00</span>
            </div>
            <button class="cart-checkout-btn" id="cart-checkout-btn">
                <i class="fas fa-shield-alt"></i> Proceed to Checkout
            </button>
        </div>
    </aside>
    
    <!-- Advanced Toast Notification -->
    <div id="toast-notification">
        <div class="toast-content">
            <div class="toast-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="toast-message">
                <div class="toast-title">Success!</div>
                <div class="toast-description">Item added to cart</div>
            </div>
            <button class="toast-close" aria-label="Close notification">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="toast-progress"></div>
    </div>
    
    <script src="js/main.js" type="module"></script>
</body>
</html>